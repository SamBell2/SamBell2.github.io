<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="My portfolio to display all of my programming and electronics projects.">
    <meta name="author" content="Sam Bell">
    <link rel="canonical" href="https://sambell2.github.io/programming/qr_code_generator/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>QR Code Generator - Sam's Portfolio</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    
    <link href="../../extra/custom.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">Sam's Portfolio</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../gallery/">Gallery</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../chess_bot/">Chess Bot</a>
</li>

                        
                            
<li class="active">
    <a href="./">QR Code Generator</a>
</li>

                        
                            
<li >
    <a href="../scripted_journeys/">Scripted Journeys</a>
</li>

                        
                            
<li >
    <a href="../sudoku_solver/">Sudoku Solver</a>
</li>

                        
                            
<li >
    <a href="../morse_code/">Morse Code Translator</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Electronics <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">CPU</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../electronics/cpu/cpu/">Overview</a>
</li>

        
            
<li >
    <a href="../../electronics/cpu/clock/">Clock Module</a>
</li>

        
            
<li >
    <a href="../../electronics/cpu/alu/">ALU</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../electronics/safe/">Safe</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Digital Making <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../digital_making/laptop/">Laptop</a>
</li>

                        
                            
<li >
    <a href="../../digital_making/light_fantastic/">Light Fantastic</a>
</li>

                        
                            
<li >
    <a href="../../digital_making/magic_mirror/">Magic Mirror</a>
</li>

                        
                            
<li >
    <a href="../../digital_making/wildlife_camera/">Wildlife Camera</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Robotics <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../robotics/WER2025/">WER 2025</a>
</li>

                        
                            
<li >
    <a href="../../robotics/picar/">Picar S</a>
</li>

                        
                            
<li >
    <a href="../../robotics/camjam/">CamJam Robot</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#qr-code-generator">QR Code Generator</a></li>
            <li class="second-level"><a href="#overview">Overview</a></li>
                
            <li class="second-level"><a href="#what-it-does">What It Does</a></li>
                
            <li class="second-level"><a href="#technical-summary">Technical Summary</a></li>
                
            <li class="second-level"><a href="#steps">Steps</a></li>
                
            <li class="second-level"><a href="#encoding">Encoding</a></li>
                
            <li class="second-level"><a href="#error-correction">Error Correction</a></li>
                
            <li class="second-level"><a href="#structuring">Structuring</a></li>
                
            <li class="second-level"><a href="#placement">Placement</a></li>
                
            <li class="second-level"><a href="#masks">Masks</a></li>
                
            <li class="second-level"><a href="#constants">Constants</a></li>
                
            <li class="second-level"><a href="#render">Render</a></li>
                
            <li class="second-level"><a href="#challenges">Challenges</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="qr-code-generator">QR Code Generator</h1>
<p><em>2024 - Aged 13</em>
<img alt="An image of my QR code generator running" src="../images/qrcode.png" />
<em>Part of the code and the ouput of the QR code generator</em></p>
<h2 id="overview">Overview</h2>
<p>I got the inspiration for this project because QR codes are everywhere but very few people actually think about how they work. I then found an amazing <a href="https://www.thonky.com/qr-code-tutorial/" rel="noopener" target="_blank">guide</a> that showed every step. QR codes are far more complicated than you would think, mostly due to the error-correction. You can imagine that if you scan a QR code in not ideal conditions, then the camera may misread one or two pixels. This means we need error correction, which is really complex! The code is on <a href="https://github.com/SamBell2/QR_generator" rel="noopener" target="_blank">my Github</a>.</p>
<hr />
<h2 id="what-it-does">What It Does</h2>
<p>It takes a line of text as input from the user, then generates the QR code, saves it as a temporary file and opens it in your default image viewer. From there you can save it somewhere else or share it.</p>
<hr />
<h2 id="technical-summary">Technical Summary</h2>
<p>It is made of almost 700 lines of Python code split over 9 files. I have used no external modules relating to QR codes, only <code>pillow</code> for graphics, <code>copy</code> to duplicate it and <code>tempfile</code> to save the image. It generates a v5 error level Q alphanumeric QR code, which can hold 87 characters.</p>
<hr />
<h2 id="steps">Steps</h2>
<p>There are multiple steps in making a QR code:  </p>
<ol>
<li>Encode the text in a particular text encoding (ISO 8859-1)</li>
<li>Generate error correction codewords</li>
<li>Interleave the data and error codewords to make a final binary string</li>
<li>Place the individual bits of the binary string in the correct places</li>
<li>Apply the mask that makes the QR code easier to read</li>
<li>Add constant elements (e.g. the corners)</li>
<li>Render</li>
</ol>
<hr />
<h2 id="encoding">Encoding</h2>
<p>This is one of the simplest steps, as all you have to do is connect the mode string (0100 for text) to the length of the string in binary. You then have to convert each character in the text to the ISO 8859-1 standard. This is easier than I thought it was going to be as it is the standard that Python's <code>chr()</code> function uses. After that, you just need to fill out the rest of the space with a repeating pattern.</p>
<hr />
<h2 id="error-correction">Error Correction</h2>
<p>This is by far the hardest part of the QR code. It has quite a lot of maths involved, including polynomial long division in a Galois Field 256. You have to convert the data string to a message polynomial and get a generator polynomial. You then have to divide the message polynomial by the generator polynomial, and the coefficients of the remainder polynomial are the error correction codewords.</p>
<hr />
<h2 id="structuring">Structuring</h2>
<p>You have to break the data codewords into blocks, then interleave the first codeword from the first block, followed by the first from the second block and so on. Once you have done the first codeword from each block, you then move onto the second from each block. Once you have done all the data, you then do the same with the error correction codewords. You then need to add a certain number of zeroes to the end so the QR code will be full.</p>
<hr />
<h2 id="placement">Placement</h2>
<p>This is a relatively simple part, although still more complex than you would imagine as there are a number of pixels that you have to avoid. You just start at the bottom-right of the QR code and work your way up in a zig-zag pattern, avoiding all of the reserved areas.</p>
<hr />
<h2 id="masks">Masks</h2>
<p>Occasionally, when you make a QR code, there will be areas of data that look like special symbols such as the corner patterns. This would really confuse the scanner, so you have to apply a mask. These are just lists of which pixels to invert. You have to apply all of them and evaluate which is the best (i.e. has the fewest confusing patterns) then apply that one.</p>
<hr />
<h2 id="constants">Constants</h2>
<p>This is the simplest bit as most of it is pre-set. You have to add the corners, borders, alignment patterns, timing patterns, dark module and the format information areas. The format information needs to be generated but isn't hard. The format string is mostly the same for my codes as I have only one type of QR code. The only bit that changes is the mask pattern used. You then have to error-correct it and add it.</p>
<hr />
<h2 id="render">Render</h2>
<p>For this, I use Python's <code>pillow</code> library to work with images. Each pixel of the QR code is 10 pixels wide in the image so when I open it in an image viewer, it doesn't blur the edges between pixels. I just loop over each pixel in the QR code and place a 10x10 square of whatever colour it is in the image.</p>
<hr />
<h2 id="challenges">Challenges</h2>
<p>The hardest bit of this was the error correction, as at the time I didn't even know what a polynomial was or how binary worked. I had to write code to do maths with strings in weird number systems. It took me about a week to make 160 lines of code, and another week to test and debug it!</p></div>
        
        
    </div>

    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
